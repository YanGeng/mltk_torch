### 本项目主要实验了BERT在fine-tune中的不同的参数实验
主要实验了fine-tune阶段的几种策略，包括weight_decay、不同的初始化策略、冻结参数、warmup等。

#### 1.实验中涉及的参数调整：
gpu device: 3090ti
> 1. bert_adam
> 2. weight_decay
> 3. reinit pooler
> 4. reinit layers
> 5. frozen_layers
> 6. warmup_proportion

#### 2.Notes:

> a detailed description is given here.     
> 详细笔记: [Bert在fine-tune时训练的几种技巧](https://zhuanlan.zhihu.com/p/524036087)

### 3.how to run

> cd scripts  
> sh auto_run_all.sh

### 4.Results
本项目主要做了关于以上参数的实验，组合下来，总计64组，所有的实验结果可以在目录下**finetune_bert_better/README.md**找到。
> 其中：1/0 represented used or not
> 表现最好的为50组f1=0.9405，27epoch*65.4266s（bert_adam1-weight_decay1-reinit_pooler0-reinit_layers0-frozen_layers0-warmup_proportion0.1）。  
> 表现最差的为55组f1=0.9281，28epoch*41.4246s（bert_adam1-weight_decay1-reinit_pooler0-reinit_layers6-frozen_layers6-warmup_proportion0.0）。  
> 加了frozen-parameter的速度会快不少，平均41.4246s/epoch 

| index | bertadam | weight_decay | reinit_pooler | reinit_layers | frozen_layers | warmup_proportion | result     | 
|-------|----------|--------------|---------------|---------------|---------------|-------------------|------------|
| 1     | 0        | 0            | 0             | 0             | 0             | 0.0               | 0.9376     |     
| 2     | 0        | 0            | 0             | 0             | 0             | 0.1               | 0.9379     |     
| 3     | 0        | 0            | 0             | 0             | 6             | 0.0               | 0.9358     |     
| 4     | 0        | 0            | 0             | 0             | 6             | 0.1               | 0.9372     |     
| 5     | 0        | 0            | 0             | 6             | 0             | 0.0               | 0.9359     |     
| 6     | 0        | 0            | 0             | 6             | 0             | 0.1               | 0.9348     |     
| 7     | 0        | 0            | 0             | 6             | 6             | 0.0               | 0.9315     |     
| 8     | 0        | 0            | 0             | 6             | 6             | 0.1               | 0.9333     |     
| 9     | 0        | 0            | 1             | 0             | 0             | 0.0               | 0.939      |     
| 10    | 0        | 0            | 1             | 0             | 0             | 0.1               | 0.9386     |     
| 11    | 0        | 0            | 1             | 0             | 6             | 0.0               | 0.937      |     
| 12    | 0        | 0            | 1             | 0             | 6             | 0.1               | 0.9357     |     
| 13    | 0        | 0            | 1             | 6             | 0             | 0.0               | 0.9344     |     
| 14    | 0        | 0            | 1             | 6             | 0             | 0.1               | 0.9337     |     
| 15    | 0        | 0            | 1             | 6             | 6             | 0.0               | 0.932      |     
| 16    | 0        | 0            | 1             | 6             | 6             | 0.1               | 0.9315     |     
| 17    | 0        | 1            | 0             | 0             | 0             | 0.0               | 0.9395     |     
| 18    | 0        | 1            | 0             | 0             | 0             | 0.1               | 0.9394     |     
| 19    | 0        | 1            | 0             | 0             | 6             | 0.0               | 0.9391     |     
| 20    | 0        | 1            | 0             | 0             | 6             | 0.1               | 0.9364     |     
| 21    | 0        | 1            | 0             | 6             | 0             | 0.0               | 0.9357     |     
| 22    | 0        | 1            | 0             | 6             | 0             | 0.1               | 0.9357     |     
| 23    | 0        | 1            | 0             | 6             | 6             | 0.0               | 0.9334     |     
| 24    | 0        | 1            | 0             | 6             | 6             | 0.1               | 0.9327     |     
| 25    | 0        | 1            | 1             | 0             | 0             | 0.0               | 0.9393     |     
| 26    | 0        | 1            | 1             | 0             | 0             | 0.1               | 0.9375     |     
| 27    | 0        | 1            | 1             | 0             | 6             | 0.0               | 0.937      |     
| 28    | 0        | 1            | 1             | 0             | 6             | 0.1               | 0.938      |     
| 29    | 0        | 1            | 1             | 6             | 0             | 0.0               | 0.9342     |     
| 30    | 0        | 1            | 1             | 6             | 0             | 0.1               | 0.9357     |     
| 31    | 0        | 1            | 1             | 6             | 6             | 0.0               | 0.9321     |     
| 32    | 0        | 1            | 1             | 6             | 6             | 0.1               | 0.9307     |     
| 33    | 1        | 0            | 0             | 0             | 0             | 0.0               | 0.9361     | 
| 34    | 1        | 0            | 0             | 0             | 0             | 0.1               | 0.9379     | 
| 35    | 1        | 0            | 0             | 0             | 6             | 0.0               | 0.9398     | 
| 36    | 1        | 0            | 0             | 0             | 6             | 0.1               | 0.937      | 
| 37    | 1        | 0            | 0             | 6             | 0             | 0.0               | 0.9287     | 
| 38    | 1        | 0            | 0             | 6             | 0             | 0.1               | 0.9351     | 
| 39    | 1        | 0            | 0             | 6             | 6             | 0.0               | 0.9312     | 
| 40    | 1        | 0            | 0             | 6             | 6             | 0.1               | 0.9306     | 
| 41    | 1        | 0            | 1             | 0             | 0             | 0.0               | 0.9342     | 
| 42    | 1        | 0            | 1             | 0             | 0             | 0.1               | 0.9371     | 
| 43    | 1        | 0            | 1             | 0             | 6             | 0.0               | 0.9376     | 
| 44    | 1        | 0            | 1             | 0             | 6             | 0.1               | 0.9391     | 
| 45    | 1        | 0            | 1             | 6             | 0             | 0.0               | 0.9284     | 
| 46    | 1        | 0            | 1             | 6             | 0             | 0.1               | 0.9349     | 
| 47    | 1        | 0            | 1             | 6             | 6             | 0.0               | 0.9304     | 
| 48    | 1        | 0            | 1             | 6             | 6             | 0.1               | 0.9314     | 
| 49    | 1        | 1            | 0             | 0             | 0             | 0.0               | 0.9377     | 
| 50    | 1        | 1            | 0             | 0             | 0             | 0.1               | **0.9405** | 
| 51    | 1        | 1            | 0             | 0             | 6             | 0.0               | 0.9394     | 
| 52    | 1        | 1            | 0             | 0             | 6             | 0.1               | 0.9372     | 
| 53    | 1        | 1            | 0             | 6             | 0             | 0.0               | 0.9304     | 
| 54    | 1        | 1            | 0             | 6             | 0             | 0.1               | 0.935      | 
| 55    | 1        | 1            | 0             | 6             | 6             | 0.0               | 0.9281     | 
| 56    | 1        | 1            | 0             | 6             | 6             | 0.1               | 0.9328     | 
| 57    | 1        | 1            | 1             | 0             | 0             | 0.0               | 0.9348     | 
| 58    | 1        | 1            | 1             | 0             | 0             | 0.1               | 0.9396     | 
| 59    | 1        | 1            | 1             | 0             | 6             | 0.0               | 0.9391     | 
| 60    | 1        | 1            | 1             | 0             | 6             | 0.1               | 0.9355     | 
| 61    | 1        | 1            | 1             | 6             | 0             | 0.0               | 0.9301     | 
| 62    | 1        | 1            | 1             | 6             | 0             | 0.1               | 0.9365     | 
| 63    | 1        | 1            | 1             | 6             | 6             | 0.0               | 0.9304     | 
| 64    | 1        | 1            | 1             | 6             | 6             | 0.1               | 0.9332     | 





























































































             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
      

 
 

































